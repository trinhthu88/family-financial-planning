<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Education Planning Calculator</title>
    <!-- Minimal CSS styling -->
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .step {
        display: none;
      }
      .step.active {
        display: block;
      }
      input, select {
        margin: 5px 0;
        padding: 5px;
        width: 250px;
      }
      button {
        margin: 10px 5px;
        padding: 10px 20px;
      }
      .result {
        border: 1px solid #ccc;
        padding: 15px;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <h1>Education Planning Calculator</h1>
    <!-- Step 1: Education Information -->
    <div id="step1" class="step active">
      <h2>Step 1: Education Information</h2>
      <label>
        Child's Name:<br>
        <input type="text" id="childName" />
      </label><br>
      <label>
        Current Age:<br>
        <input type="number" id="currentAge" />
      </label><br>
      <label>
        Target Education Age (e.g., University/Private High School):<br>
        <input type="number" id="targetAge" />
      </label><br>
      <label>
        Year Attending:<br>
        <input type="number" id="yearAttending" />
      </label><br>
      <button onclick="nextStep(1)">Next</button>
    </div>

    <!-- Step 2: Education Cost -->
    <div id="step2" class="step">
      <h2>Step 2: Education Cost</h2>
      <label>
        Estimated Annual Cost (in your currency):<br>
        <input type="number" id="annualCost" />
      </label><br>
      <button onclick="prevStep(2)">Back</button>
      <button onclick="nextStep(2)">Next</button>
    </div>

    <!-- Step 3: Savings -->
    <div id="step3" class="step">
      <h2>Step 3: Savings</h2>
      <label>
        Current Education Savings:<br>
        <input type="number" id="currentSavings" />
      </label><br>
      <label>
        Monthly Contribution to Education Savings:<br>
        <input type="number" id="monthlyContribution" />
      </label><br>
      <label>
        Estimated Annual Rate of Return (in %):<br>
        <input type="number" id="annualReturn" />
      </label><br>
      <label>
        Annual Cost of Inflation (in %):<br>
        <input type="number" id="inflationRate" />
      </label><br>
      <button onclick="prevStep(3)">Back</button>
      <button onclick="nextStep(3)">Next</button>
    </div>

    <!-- Step 4: Coverage Percentage -->
    <div id="step4" class="step">
      <h2>Step 4: Amount You Want to Cover</h2>
      <label>
        What percentage of the total education cost do you want to cover? (e.g., 100 for full coverage, 50 for half):<br>
        <input type="number" id="coveragePercent" />
      </label><br>
      <button onclick="prevStep(4)">Back</button>
      <button onclick="calculateResults()">Calculate</button>
    </div>

    <!-- Results -->
    <div id="results" class="result" style="display: none;">
      <h2>Results</h2>
      <p id="estimatedTotalCost"></p>
      <p id="totalCoverageAmount"></p>
      <p id="projectedSavings"></p>
      <p id="savingsDeficit"></p>
      <p id="additionalMonthlySaving"></p>
      <button onclick="resetCalculator()">Start Over</button>
    </div>

    <script>
      let currentStep = 1;
      function nextStep(step) {
        document.getElementById("step" + step).classList.remove("active");
        document.getElementById("step" + (step + 1)).classList.add("active");
        currentStep = step + 1;
      }
      function prevStep(step) {
        document.getElementById("step" + step).classList.remove("active");
        document.getElementById("step" + (step - 1)).classList.add("active");
        currentStep = step - 1;
      }

      function calculateResults() {
        // Step 1: Education Information
        const childName = document.getElementById("childName").value;
        const currentAge = parseFloat(document.getElementById("currentAge").value);
        const targetAge = parseFloat(document.getElementById("targetAge").value);
        const yearAttending = parseInt(document.getElementById("yearAttending").value, 10);

        // Step 2: Education Cost
        const annualCost = parseFloat(document.getElementById("annualCost").value);

        // Step 3: Savings
        const currentSavings = parseFloat(document.getElementById("currentSavings").value);
        const monthlyContribution = parseFloat(document.getElementById("monthlyContribution").value);
        const annualReturn = parseFloat(document.getElementById("annualReturn").value) / 100;
        const inflationRate = parseFloat(document.getElementById("inflationRate").value) / 100;

        // Step 4: Coverage Percentage
        const coveragePercent = parseFloat(document.getElementById("coveragePercent").value);

        // Calculate number of years until education begins
        const yearsUntilEducation = targetAge - currentAge;
        const duration = 4; // Assume education lasts 4 years

        // Calculate estimated total education cost (adjusted for inflation for each year of education)
        let totalCost = 0;
        for (let i = 0; i < duration; i++) {
          totalCost += annualCost * Math.pow(1 + inflationRate, yearsUntilEducation + i);
        }

        // Calculate total amount to cover based on percentage
        const amountToCover = (coveragePercent / 100) * totalCost;

        // Calculate projected savings by the time education begins
        const monthlyReturn = Math.pow(1 + annualReturn, 1/12) - 1;
        const months = yearsUntilEducation * 12;
        const fvCurrent = currentSavings * Math.pow(1 + annualReturn, yearsUntilEducation);
        const fvContributions = monthlyContribution * ((Math.pow(1 + monthlyReturn, months) - 1) / monthlyReturn);
        const projectedSavings = fvCurrent + fvContributions;

        // Calculate savings deficit
        const deficit = Math.max(amountToCover - projectedSavings, 0);

        // Calculate additional monthly saving required (using annuity formula)
        const additionalMonthly = deficit * monthlyReturn / (Math.pow(1 + monthlyReturn, months) - 1);

        // Display the results
        document.getElementById("estimatedTotalCost").innerText = `Estimated Total Education Cost: ${totalCost.toFixed(2)}`;
        document.getElementById("totalCoverageAmount").innerText = `Total Amount to Cover (at ${coveragePercent}%): ${amountToCover.toFixed(2)}`;
        document.getElementById("projectedSavings").innerText = `Projected Savings by Start of Education: ${projectedSavings.toFixed(2)}`;
        document.getElementById("savingsDeficit").innerText = `Savings Deficit: ${deficit.toFixed(2)}`;
        document.getElementById("additionalMonthlySaving").innerText = `Additional Monthly Saving Required: ${additionalMonthly.toFixed(2)}`;

        // Hide all steps and show results
        for (let i = 1; i <= 4; i++) {
          document.getElementById("step" + i).style.display = "none";
        }
        document.getElementById("results").style.display = "block";
      }

      function resetCalculator() {
        // Clear input values
        document.getElementById("childName").value = "";
        document.getElementById("currentAge").value = "";
        document.getElementById("targetAge").value = "";
        document.getElementById("yearAttending").value = "";
        document.getElementById("annualCost").value = "";
        document.getElementById("currentSavings").value = "";
        document.getElementById("monthlyContribution").value = "";
        document.getElementById("annualReturn").value = "";
        document.getElementById("inflationRate").value = "";
        document.getElementById("coveragePercent").value = "";
        // Reset display of steps
        for (let i = 1; i <= 4; i++) {
          document.getElementById("step" + i).style.display = "block";
          document.getElementById("step" + i).classList.remove("active");
        }
        document.getElementById("step1").classList.add("active");
        document.getElementById("results").style.display = "none";
      }
    </script>
  </body>
</html>
